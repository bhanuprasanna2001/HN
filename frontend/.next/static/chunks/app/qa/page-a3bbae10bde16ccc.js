(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{960:(e,t,r)=>{"use strict";async function s(e,t){let r=await fetch("".concat("/api").concat(e),{headers:{"Content-Type":"application/json",...null==t?void 0:t.headers},...t});if(!r.ok)throw Error((await r.json().catch(()=>({}))).detail||"Request failed: ".concat(r.status));return r.json()}function a(){return s("/stats")}function c(e){return s("/copilot/ask",{method:"POST",body:JSON.stringify({question:e})})}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=new URLSearchParams({page:String(e),search:t});return s("/knowledge/articles?".concat(r))}function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:80;return s("/knowledge/graph?limit=".concat(e))}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=new URLSearchParams({status:e,page:String(t)});return s("/learning/events?".concat(r))}function i(e){return s("/learning/generate-draft",{method:"POST",body:JSON.stringify({ticket_number:e})})}function d(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return s("/learning/review",{method:"POST",body:JSON.stringify({event_id:e,action:t,reviewer_notes:r})})}function m(e){return s("/qa/score",{method:"POST",body:JSON.stringify({ticket_number:e})})}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=new URLSearchParams({page:String(e),search:t,status:r});return s("/tickets?".concat(a))}r.d(t,{DM:()=>n,Fq:()=>l,H2:()=>m,Ls:()=>d,PF:()=>i,WS:()=>x,YK:()=>a,mF:()=>c,wV:()=>o})},1362:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},1578:(e,t,r)=>{"use strict";function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,s,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t)if(Array.isArray(t)){var c=t.length;for(r=0;r<c;r++)t[r]&&(s=e(t[r]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s);return a}(e))&&(s&&(s+=" "),s+=t);return s}(t)}function a(e){return new Intl.NumberFormat().format(e)}function c(e,t){return e.length<=t?e:e.slice(0,t-1)+"…"}function l(e){var t;return null!=(t=({kb_article:"#3B82F6",script:"#8B5CF6",ticket:"#10B981",conversation:"#F59E0B"})[e])?t:"#737373"}function n(e){let t=e.toLowerCase();return"approved"===t?"bg-emerald-50 text-emerald-700 border-emerald-200":"rejected"===t?"bg-red-50 text-red-700 border-red-200":"pending"===t?"bg-amber-50 text-amber-700 border-amber-200":"closed"===t?"bg-neutral-100 text-neutral-600 border-neutral-200":"bg-neutral-50 text-neutral-600 border-neutral-200"}r.d(t,{cn:()=>s,ZV:()=>a,_k:()=>l,ST:()=>n,xv:()=>c})},1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(2115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:i="",children:d,iconNode:m,...x}=e;return(0,s.createElement)("svg",{ref:t,...l,width:a,height:a,stroke:r,strokeWidth:o?24*Number(n)/Number(a):n,className:c("lucide",i),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(x)&&{"aria-hidden":"true"},...x},[...m.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let r=(0,s.forwardRef)((r,l)=>{let{className:o,...i}=r;return(0,s.createElement)(n,{ref:l,iconNode:t,className:c("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...i})});return r.displayName=a(e),r}},2218:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(5155),a=r(2115),c=r(1362),l=r(8874),n=r(6651),o=r(9715),i=r(5299),d=r(1847);let m=(0,d.A)("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);var x=r(6907);let u=(0,d.A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var h=r(960),p=r(1578);function f(e){var t;let{severity:r}=e,a={CRITICAL:"bg-red-100 text-red-800 border-red-200",HIGH:"bg-orange-100 text-orange-800 border-orange-200",MEDIUM:"bg-amber-100 text-amber-800 border-amber-200",LOW:"bg-blue-100 text-blue-800 border-blue-200"};return(0,s.jsx)("span",{className:(0,p.cn)("rounded-full border px-2 py-0.5 text-[10px] font-semibold",null!=(t=a[r])?t:a.LOW),children:r})}function v(e){let{title:t,data:r}=e,a=Object.entries(r).filter(e=>{let[t]=e;return"Final_Weighted_Score"!==t}),n=r.Final_Weighted_Score;return(0,s.jsxs)("div",{className:"rounded-md border border-[var(--color-border)] p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-[var(--color-text)]",children:t}),n&&"N/A"!==n&&(0,s.jsx)("span",{className:"rounded-full bg-[var(--color-accent)] px-2.5 py-0.5 text-[11px] font-semibold text-white",children:n})]}),a.length>0&&(0,s.jsx)("div",{className:"mt-3 space-y-2",children:a.map(e=>{let[t,r]=e,a="object"==typeof r?null==r?void 0:r.score:r,n="object"==typeof r?null==r?void 0:r.evidence:"";return(0,s.jsxs)("div",{className:"flex items-start gap-2 text-[11px]",children:["Yes"===a?(0,s.jsx)(c.A,{size:13,className:"mt-0.5 shrink-0 text-emerald-500"}):"No"===a?(0,s.jsx)(l.A,{size:13,className:"mt-0.5 shrink-0 text-red-500"}):(0,s.jsx)("div",{className:"mt-0.5 h-3.5 w-3.5 shrink-0 rounded-full bg-neutral-200"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[var(--color-text)]",children:t.replace(/_/g," ")}),n&&(0,s.jsx)("p",{className:"mt-0.5 text-[10px] italic text-[var(--color-text-muted)]",children:(0,p.xv)(String(n),150)})]})]},t)})})]})}function b(){let[e,t]=(0,a.useState)([]),[r,d]=(0,a.useState)(""),[b,g]=(0,a.useState)(1),[j,N]=(0,a.useState)(0),[k,y]=(0,a.useState)(null),[w,A]=(0,a.useState)(!1),[_,S]=(0,a.useState)(null);async function C(e){y(e),A(!0),S(null);try{let t=await (0,h.H2)(e);S(t.data)}catch(e){}finally{A(!1)}}return(0,a.useEffect)(()=>{(0,h.WS)(b,r,"Closed").then(e=>{t(e.data),N(e.meta.total)}).catch(()=>{})},[b,r]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold text-[var(--color-text)]",children:"QA & Compliance"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-[var(--color-text-muted)]",children:"Score interactions for quality and scan for OWASP compliance violations"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-5 gap-6",children:[(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsxs)("div",{className:"mb-3 flex items-center gap-2",children:[(0,s.jsx)("h2",{className:"text-sm font-semibold text-[var(--color-text)]",children:"Closed Tickets"}),(0,s.jsxs)("span",{className:"text-xs text-[var(--color-text-muted)]",children:["(",j,")"]})]}),(0,s.jsxs)("div",{className:"relative mb-3",children:[(0,s.jsx)(n.A,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--color-text-muted)]"}),(0,s.jsx)("input",{value:r,onChange:e=>{d(e.target.value),g(1)},placeholder:"Search tickets…",className:"w-full rounded-md border border-[var(--color-border)] bg-[var(--color-bg)] py-2 pl-9 pr-3 text-xs text-[var(--color-text)] placeholder:text-[var(--color-text-muted)] focus:border-[var(--color-accent)] focus:outline-none"})]}),(0,s.jsx)("div",{className:"max-h-[calc(100vh-18rem)] space-y-1.5 overflow-y-auto",children:e.map(e=>(0,s.jsxs)("button",{onClick:()=>C(e.Ticket_Number),className:(0,p.cn)("flex w-full items-start gap-2.5 rounded-md border p-3 text-left transition-colors",k===e.Ticket_Number?"border-[var(--color-accent)] bg-neutral-50":"border-[var(--color-border)] bg-[var(--color-surface)] hover:bg-neutral-50"),children:[(0,s.jsx)(o.A,{size:14,strokeWidth:1.6,className:"mt-0.5 shrink-0 text-emerald-500"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-[var(--color-text)]",children:(0,p.xv)(e.Subject||e.Ticket_Number,60)}),(0,s.jsx)("p",{className:"mt-0.5 font-mono text-[10px] text-[var(--color-text-muted)]",children:e.Ticket_Number})]})]},e.Ticket_Number))})]}),(0,s.jsx)("div",{className:"col-span-3",children:w?(0,s.jsxs)("div",{className:"flex h-64 flex-col items-center justify-center gap-3 rounded-lg border border-[var(--color-border)] bg-[var(--color-surface)]",children:[(0,s.jsx)(i.A,{size:24,className:"animate-spin text-[var(--color-accent)]"}),(0,s.jsx)("p",{className:"text-xs text-[var(--color-text-muted)]",children:"Scoring interaction & checking compliance…"})]}):_?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"rounded-lg border border-[var(--color-border)] bg-[var(--color-surface)] p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-sm font-semibold text-[var(--color-text)]",children:["QA Score: ",_.ticket_number]}),(0,s.jsxs)("p",{className:"mt-0.5 text-xs text-[var(--color-text-muted)]",children:["Mode: ",_.Evaluation_Mode||"N/A"]})]}),_.Overall_Weighted_Score&&"N/A"!==_.Overall_Weighted_Score&&(0,s.jsx)("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-[var(--color-accent)]",children:(0,s.jsx)("span",{className:"text-sm font-bold text-white",children:_.Overall_Weighted_Score})})]}),_.QA_Recommendation&&(0,s.jsxs)("div",{className:"mt-3 rounded-md bg-neutral-50 px-3 py-2",children:[(0,s.jsx)("p",{className:"text-[10px] font-semibold uppercase tracking-wider text-[var(--color-text-muted)]",children:"Recommendation"}),(0,s.jsx)("p",{className:"mt-0.5 text-xs text-[var(--color-text)]",children:_.QA_Recommendation})]}),_.Contact_Summary&&(0,s.jsx)("p",{className:"mt-3 text-xs leading-relaxed text-[var(--color-text-muted)]",children:_.Contact_Summary})]}),_.Interaction_QA&&Object.keys(_.Interaction_QA).length>0&&(0,s.jsx)(v,{title:"Interaction QA",data:_.Interaction_QA}),_.Case_QA&&Object.keys(_.Case_QA).length>0&&(0,s.jsx)(v,{title:"Case QA",data:_.Case_QA}),_.Red_Flags&&(0,s.jsxs)("div",{className:"rounded-md border border-red-200 bg-red-50 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m,{size:16,className:"text-red-600"}),(0,s.jsx)("h4",{className:"text-xs font-semibold text-red-800",children:"Red Flags (Autozero)"})]}),(0,s.jsx)("div",{className:"mt-2 space-y-1.5",children:Object.entries(_.Red_Flags).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{className:"flex items-center gap-2 text-[11px]",children:["Yes"===r.score?(0,s.jsx)(l.A,{size:13,className:"text-red-600"}):(0,s.jsx)(c.A,{size:13,className:"text-emerald-500"}),(0,s.jsx)("span",{className:"Yes"===r.score?"font-medium text-red-800":"text-red-700",children:t.replace(/_/g," ")})]},t)})})]}),_.owasp_checks&&(0,s.jsxs)("div",{className:(0,p.cn)("rounded-md border p-4",_.owasp_checks.compliant?"border-emerald-200 bg-emerald-50":"border-red-200 bg-red-50"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[_.owasp_checks.compliant?(0,s.jsx)(x.A,{size:16,className:"text-emerald-600"}):(0,s.jsx)(m,{size:16,className:"text-red-600"}),(0,s.jsxs)("h4",{className:(0,p.cn)("text-xs font-semibold",_.owasp_checks.compliant?"text-emerald-800":"text-red-800"),children:["OWASP Compliance ",_.owasp_checks.compliant?"— Passed":"— Violations Found"]})]}),(0,s.jsx)("div",{className:"mt-2 flex flex-wrap gap-1.5",children:_.owasp_checks.owasp_frameworks.map(e=>(0,s.jsx)("span",{className:"rounded-full bg-white/60 px-2 py-0.5 text-[10px] font-medium",children:e},e))}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("p",{className:"text-[10px] font-semibold uppercase tracking-wider text-neutral-500",children:"Checks Performed"}),(0,s.jsx)("div",{className:"mt-1 flex flex-wrap gap-1.5",children:_.owasp_checks.checks_run.map(e=>(0,s.jsxs)("span",{className:"flex items-center gap-1 text-[11px]",children:[(0,s.jsx)(c.A,{size:11,className:"text-emerald-500"}),e]},e))})]}),_.owasp_checks.findings.length>0&&(0,s.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,s.jsx)("p",{className:"text-[10px] font-semibold uppercase tracking-wider text-red-600",children:"Findings"}),_.owasp_checks.findings.map((e,t)=>(0,s.jsxs)("div",{className:"rounded-md bg-white/60 p-2.5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u,{size:12,className:"text-red-500"}),(0,s.jsx)("span",{className:"text-[11px] font-medium text-red-800",children:e.category}),(0,s.jsx)(f,{severity:e.severity})]}),(0,s.jsx)("p",{className:"mt-1 text-[11px] text-red-700",children:e.description}),(0,s.jsx)("p",{className:"mt-0.5 font-mono text-[10px] text-red-500",children:e.owasp_ref})]},t))]})]})]}):(0,s.jsxs)("div",{className:"flex h-64 flex-col items-center justify-center gap-2 rounded-lg border border-[var(--color-border)] bg-[var(--color-surface)]",children:[(0,s.jsx)(x.A,{size:28,strokeWidth:1.2,className:"text-[var(--color-text-muted)]"}),(0,s.jsx)("p",{className:"text-sm text-[var(--color-text-muted)]",children:"Select a ticket to score"}),(0,s.jsx)("p",{className:"text-xs text-[var(--color-text-muted)]",children:"QA scoring uses the provided rubric + OWASP compliance checks"})]})})]})]})}},5299:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6651:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},6907:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},8874:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},8953:(e,t,r)=>{Promise.resolve().then(r.bind(r,2218))},9715:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])}},e=>{e.O(0,[441,255,358],()=>e(e.s=8953)),_N_E=e.O()}]);